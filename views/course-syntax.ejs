<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>KotlinRush LMS – Kotlin Syntax</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/public/styles/style.css">
  <link rel="apple-touch-icon" href="/public/imgs/favicon.png" sizes="180x180">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    .sidebar {
      width: 250px;
      height: 100vh;
      background-color: #7F52FF;
      position: fixed;
      top: 0;
      left: 0;
      padding: 1rem;
      overflow-y: auto;
    }
    .sidebar a {
      text-decoration: none;
    }
    .main-content {
      margin-left: 250px;
      padding: 20px 100px;
    }
    .code-editor {
      width: 100%;
      height: 200px;
      font-family: monospace;
      font-size: 1rem;
      background-color: #1e1e1e;
      color: #f8f9fa;
      padding: 10px;
      border: none;
      border-radius: 0.5rem;
    }
    .output-area {
      background-color: #212121;
      color: #f8f9fa;
      padding: 10px;
      border-radius: 0.5rem;
      margin-top: 10px;
      min-height: 50px;
    }
    .output-area {
      padding: 15px;
      border-radius: 8px;
      margin-top: 10px;
      min-height: 80px;
      color: white !important; 
    }

    .bg-success { 
      background-color: #198754!important;
      color: white !important;
    }

    .bg-danger { 
      background-color: #dc3545!important;
      color: white !important;
    }

    .bg-warning { 
      background-color: #ffc107!important;
      color: black !important;
    }

    .bi { 
      font-size: 1.5rem;
      margin-right: 10px; 
    }
    pre {
      background: rgba(0,0,0,0.3);
      padding: 8px;
      border-radius: 4px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body class="bg-dark text-light" style="font-family: 'Roboto Condensed', sans-serif;">
  <!-- Sidebar -->
  <div class="sidebar">
    <a href="/" class="d-flex align-items-center mb-3 text-white text-decoration-none">
      <img src="https://cdn.worldvectorlogo.com/logos/kotlin-2.svg" alt="KotlinRush Logo" width="40" height="40" class="me-2">
      <span class="fs-4">KOTLINRUSH</span>
    </a>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
      <li class="nav-item">
        <a href="/education" class="nav-link text-white">
          <i class="bi bi-house-door me-2"></i>
          Education
        </a>
      </li>
      <li>
        <a href="/course" class="nav-link active text-white">
          <i class="bi bi-collection me-2"></i>
          Courses
        </a>
      </li>
      <li>
        <a href="/check" class="nav-link text-white">
          <i class="bi bi-shield-lock me-2"></i>
          2FA Setup
        </a>
      </li>
    </ul>
    <hr>
    <div class="dropdown">
      <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" data-bs-toggle="dropdown">
        <img src="https://github.com/mdo.png" alt="User" width="32" height="32" class="rounded-circle me-2">
        <strong><%= userName %></strong>
      </a>
      <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
        <li><a class="dropdown-item" href="/profile">Profile</a></li>
        <li><a class="dropdown-item" href="/settings">Settings</a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item" href="/logout">Sign out</a></li>
      </ul>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Kotlin Syntax</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#coursesNavbar" aria-controls="coursesNavbar" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="coursesNavbar">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link active" href="#lecture">Lecture</a></li>
            <li class="nav-item"><a class="nav-link" href="#assignment">Assignment</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Lecture Section -->
    <section id="lecture" class="mb-5">
      <h2>Lecture: Kotlin Syntax</h2>
      <p>
        In this lecture, you will learn about the basic syntax of Kotlin. Kotlin is a modern, statically typed programming language that is fully interoperable with Java. Here are some key points:
      </p>
      <ul>
        <li>Kotlin uses type inference, so you often don’t need to declare the type explicitly.</li>
        <li>Variables are declared using <code>val</code> (immutable) and <code>var</code> (mutable).</li>
        <li>Functions are declared with the <code>fun</code> keyword.</li>
        <li>Kotlin supports extension functions, null-safety, and many other modern language features.</li>
      </ul>
      <p>
        Below is an example of a simple Kotlin program:
      </p>
      <pre class="bg-secondary text-light p-3 rounded">
        fun main() {
            println("Hello, Kotlin!")
        }</pre>
    </section>

    <!-- Assignment Section with Online Compiler -->
    <section id="assignment" class="mb-5">
      <h2>Assignment: Write Your Own Kotlin Code</h2>
      <p>
        Write a Kotlin program that prints <code>"Hello, Kotlin!"</code>.
        <strong>Require format:</strong>
      </p>
      <pre class="bg-secondary text-light p-3 rounded">
    fun main() {
        // Type here
    }</pre>
      
    <textarea id="codeEditor" class="code-editor" placeholder="fun main() {\n    // Your code here\n}"></textarea>
      <div class="mt-2 text-muted">* Не используйте пользовательские имена классов</div>
      
      <button id="runCode" class="btn btn-primary mt-3">Run Code</button>
      <div id="codeOutput" class="output-area mt-3"></div>
    </section>
  </div>

  <!-- Footer -->
  <footer class="bg-dark text-white text-center py-4">
    <p>&copy; 2025 KotlinRush. All Rights Reserved.</p>
    <p>
      <a href="/privacy" class="text-white text-decoration-none">Privacy Policy</a> | 
      <a href="/terms" class="text-white text-decoration-none">Terms of Service</a>
    </p>
  </footer>

  <!-- Bootstrap Bundle JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Script for Online Compiler -->
  <script>
    document.getElementById("runCode").addEventListener("click", async function() {
  const expectedOutput = "Hello, Kotlin!";
  const userCode = document.getElementById("codeEditor").value.trim();
  const outputArea = document.getElementById("codeOutput");
  
  outputArea.innerHTML = '<div class="spinner-border text-light" role="status"></div>';
  outputArea.style.color = "#f8f9fa";

  try {
    const response = await fetch('/api/compile', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ code: userCode })
    });
    
    const data = await response.json();
    
    outputArea.classList.remove('bg-success', 'bg-danger');
    outputArea.innerHTML = '';

    if (data.isCorrect) {
      outputArea.innerHTML = `
        <div class="d-flex align-items-center">
          <i class="bi bi-check-circle-fill"></i>
          <div>
            <div class="fw-bold">✅ Correct!</div>
            <div>Output: "${data.output}"</div>
          </div>
        </div>
      `;
      outputArea.classList.add('bg-success');
    } else {
      outputArea.innerHTML = `
        <div class="d-flex align-items-center">
          <i class="bi bi-x-circle-fill"></i>
          <div>
            <div class="fw-bold">❌ Incorrect</div>
            <div>${data.output ? `Your output: "${data.output}"` : 'No output'}</div>
            <div class="mt-1">Expected: "Hello, Kotlin!"</div>
          </div>
        </div>
      `;
      outputArea.classList.add('bg-danger');
    }

  } catch (error) {
    outputArea.innerHTML = `
      <div class="text-danger">
        <i class="bi bi-x-circle-fill"></i>
        Error: ${error.message}
      </div>
    `;
    outputArea.classList.add('bg-danger');
  }
});
    </script>
</body>
</html>
